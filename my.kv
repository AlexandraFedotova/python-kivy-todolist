#:kivy 1.0

#OneLineAvatarIconListItem
<ItemConfirm>:
    check: check
    on_release: root.set_icon()

    CheckboxLeftWidget:
        id: check
        group: "check"

#OneLineRightIconListItem
<CategoryItem>:
    on_release: app.show_tasks_in_categories_screen(self.text)

    text: 'Category name'

    IconRightWidget:
        icon: "trash-can-outline"
        on_release:
            app.screen_manager.get_screen('categoriesList').show_dialog_delete_category(root)

#MDScreen
<CategoriesListScreen>:
    name: 'categoriesList'

    categories_list: categories_list

    on_pre_enter: self.set_categories_list()

    MDBoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            title: app.title
            opposite_colors: True
            elevation: 10

            right_action_items: [["plus", lambda x: root.show_dialog_create_category()]]

        ScrollView:
            scroll_timeout: 100
            size_hint: 1, 1
            do_scroll_x: False

            MDList:
                id: categories_list
                padding: '2sp'


#TwoLineIconListItem
<TaskItem>:
    checkbox: checkbox

    on_release: app.create_task_only_screen(self)

    text: 'Task name'
    secondary_text: 'Task description'

    IconRightWidget:
        icon: "trash-can-outline"
        on_release:
            app.screen_manager.get_screen('tasksInCategory').show_delete_task_dialog(root)

    CheckboxLeftWidget:
        id: checkbox
        on_release:
            app.screen_manager.get_screen('tasksInCategory').set_task_state(root)

# MDScreen
<TasksInCategoryScreen>:
    name: 'tasksInCategory'

    task_list: task_list
    toolbar: toolbar

    on_pre_enter:
        self.set_tasks_list(app.current_category)

    MDBoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            id: toolbar
            title: 'Category'
            opposite_colors: True
            elevation: 10

            right_action_items: [["pencil-outline", lambda x: root.show_rename_category_dialog()],["plus", lambda x: root.show_create_task_dialog()]]
            left_action_items: [["arrow-left", lambda x: app.set_screen('categoriesList')]]

        ScrollView:
            scroll_timeout: 100
            size_hint: 1, 1
            do_scroll_x: False

            MDList:
                id: task_list
                padding: '2sp'

<TaskOnlyScreen>:
    name: 'taskOnly'

    task_name: task_name
    task_description: task_description
    task_is_done: task_is_done
    task_category: task_category
    toolbar: toolbar

    MDBoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            id: toolbar
            title: 'Task'
            opposite_colors: True
            elevation: 10

            left_action_items: [["arrow-left", lambda x: app.remove_task_only_screen()]]
            right_action_items: [["pencil-outline", lambda x: root.allow_task_editing()]]

        MDGridLayout:
            cols: 1
            padding: '10sp'
            spacing: '10sp'

            MDBoxLayout:
                size_hint: 1, None
                height: root.task_name.height
                padding: 0
                spacing: 0

                MDCheckbox:
                    id: task_is_done
                    on_release: root.set_is_done()
                    size_hint_x: None
                    width: 50
                    pos_hint_y: .5

                MDTextField:
                    id: task_name
                    mode: 'fill'
                    radius: 10, 10, 10, 10
                    multiline: True
                    write_tab: False
                    font_size: '20sp'
                    fill_color_normal: 1, 1, 1, 1
                    text_color_normal: 0, 0, 0, 1
                    size_hint_x: None
                    width: root.width - 80
                    pos_hint_y: .5
                    disabled: True

            MDTextField:
                id: task_category
                mode: 'fill'
                radius: 10, 10, 10, 10
                multiline: False
                write_tab: False
                fill_color_normal: 1, 1, 1, 1
                text_color_normal: 0, 0, 0, 1
                size_hint_x: None
                width: root.width - 20
                pos_hint_y: .5

                disabled: True
                on_focus: root.show_category_menu()


            MDTextField:
                id: task_description
                mode: 'fill'
                radius: 10, 10, 10, 10
                multiline: True
                font_size: '18sp'
                size_hint_x: None
                width: root.width - 20

                text_color_normal: 0, 0, 0, 1
                fill_color_normal: 1, 1, 1, 1

                disabled: True

#ScreenManager
<MainApp>:
    CategoriesListScreen:

    TasksInCategoryScreen:



